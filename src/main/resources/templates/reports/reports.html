<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–û—Ç—á—ë—Ç—ã</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
<div class="max-w-6xl mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6">üìä –û—Ç—á—ë—Ç—ã</h1>

    <!-- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ -->
    <form method="get" class="bg-white p-4 rounded-xl shadow mb-6 flex gap-4 items-end">
        <div>
            <label class="block font-semibold">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</label>
            <input type="date" name="startDate" class="border rounded p-2 w-full" required>
        </div>
        <div>
            <label class="block font-semibold">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è:</label>
            <input type="date" name="endDate" class="border rounded p-2 w-full" required>
        </div>
        <div class="flex gap-2">
            <button type="submit" formaction="/reports/getAllCars"
                    class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                –ê–≤—Ç–æ
            </button>
            <button type="submit" formaction="/reports/getAllOwners"
                    class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                –í–ª–∞–¥–µ–ª—å—Ü—ã
            </button>
            <button type="submit" formaction="/reports/getResults"
                    class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
                –ó–∞–¥–∞—á–∏
            </button>
        </div>
    </form>

    <!-- üöó –û—Ç—á—ë—Ç –ø–æ –∞–≤—Ç–æ -->
    <div th:if="${cars != null}">
        <h2 class="text-2xl font-semibold mb-4">üöó –ê–≤—Ç–æ–º–æ–±–∏–ª–∏</h2>
        <table class="w-full bg-white rounded-xl shadow text-left">
            <thead class="bg-gray-200">
            <tr>
                <th class="p-3">–ì–æ—Å–Ω–æ–º–µ—Ä</th>
                <th class="p-3">–ú–∞—Ä–∫–∞</th>
                <th class="p-3">–ú–æ–¥–µ–ª—å</th>
                <th class="p-3">VIN</th>
                <th class="p-3">–¢–æ–ø–ª–∏–≤–æ</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="car : ${cars}" class="border-b">
                <td class="p-3" th:text="${car.numberPlate}"></td>
                <td class="p-3" th:text="${car.carBrand}"></td>
                <td class="p-3" th:text="${car.carModel}"></td>
                <td class="p-3" th:text="${car.vinCode}"></td>
                <td class="p-3" th:text="${car.fuelType}"></td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- üë§ –û—Ç—á—ë—Ç –ø–æ –≤–ª–∞–¥–µ–ª—å—Ü–∞–º -->
    <div th:if="${owner != null and owner[0]?.phoneNumber != null}">
        <h2 class="text-2xl font-semibold mt-12 mb-4">üë§ –í–ª–∞–¥–µ–ª—å—Ü—ã</h2>
        <table class="w-full bg-white rounded-xl shadow text-left">
            <thead class="bg-gray-200">
            <tr>
                <th class="p-3">–ò–º—è</th>
                <th class="p-3">–§–∞–º–∏–ª–∏—è</th>
                <th class="p-3">–¢–µ–ª–µ—Ñ–æ–Ω</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="owner : ${owner}" class="border-b">
                <td class="p-3" th:text="${owner.name}"></td>
                <td class="p-3" th:text="${owner.lastName}"></td>
                <td class="p-3" th:text="${owner.phoneNumber}"></td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- üßæ –û—Ç—á—ë—Ç –ø–æ –∑–∞–¥–∞—á–∞–º -->
    <div th:if="${results != null}">
        <h2 class="text-2xl font-semibold mt-12 mb-4">üßæ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏</h2>
        <table class="w-full bg-white rounded-xl shadow text-left">
            <thead class="bg-gray-200">
            <tr>
                <th class="p-3">–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th class="p-3">–°—É–º–º–∞</th>
                <th class="p-3">–ú–∞—Ä–∫–∞</th>
                <th class="p-3">–ú–æ–¥–µ–ª—å</th>
                <th class="p-3">–ö–ª–∏–µ–Ω—Ç</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="res : ${results}" class="border-b">
                <td class="p-3" th:text="${res.taskDescription}"></td>
                <td class="p-3" th:text="${res.price} + ' –≥—Ä–Ω'"></td>
                <td class="p-3" th:text="${res.carBrand}"></td>
                <td class="p-3" th:text="${res.carModel}"></td>
                <td class="p-3" th:text="${res.ownerName}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>
